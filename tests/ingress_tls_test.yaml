apiVersion: v1
kind: Secret
metadata:
  name: ingress-tls-test-secret
  namespace: default
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUREVENDQWZXZ0F3SUJBZ0lVYzBJbUpqMEJ5d1NaUmJtVU5oNmFlOGN2OHNNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0ZqRVVNQklHQTFVRUF3d0xabTl2TG1KaGNpNWpiMjB3SGhjTk1qRXdOekE0TURVeU16QXlXaGNOTWpJdwpOekE0TURVeU16QXlXakFXTVJRd0VnWURWUVFEREF0bWIyOHVZbUZ5TG1OdmJUQ0NBU0l3RFFZSktvWklodmNOCkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFOSXAySkNNMHFJRGNTZ3VTTDlJWndoOCs0MWp2akZBQkJtcnBnZDUKNU5kTDNITG0wZVEvTHdoZzVwa3pnSnJzdHR2cS8zSmlhRXNnZ3drNklKNUY5b1lsb2FxUTd3alBZUzlyOFdzYwprSXZFcHU3RzBwN01yWkdURTUyS3VUeVJDR3BtWGJjdXJHVUtKdDdFbkpHNGxGV1FwLzdnbXAwdUYxLzlUeG1ZCkZWVm9WWktmZ1JFaFhTcGM2amFjKzdmdlRaOExzaVExRkc3RmVCT01PcGYxSjNQYnBwN0NuU2hVZ2FiMkY2aFAKejJiLzYwSFFuYzZyYnA5Z2pYMit6WlVMdzdCT256WldQZVZGOFBURmZMNjJlZFJZQU9ORHh2L1ZaNE9XY2V2dwo3ZnF5emFRcDY1SEw5ZS9haWtPNUkwaGI5NFJ0YVdnOGkwSlJWclk2RzM3TVU3RUNBd0VBQWFOVE1GRXdIUVlEClZSME9CQllFRkNLbWQxK1I4cEJyV3FWQWI5cWpPeWFjb2NDRU1COEdBMVVkSXdRWU1CYUFGQ0ttZDErUjhwQnIKV3FWQWI5cWpPeWFjb2NDRU1BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQgpBSUhKc3FFMmlScGFtQzAvSlpRV2dJbXY4dEZYL0NtOVpsL29RUHVLcXZSTCtkdW1QSlM0NkxBa3NIS0drWnYzCmpzY1JOOVZHclZTMTlMdnlVcm11ektISWtKTmFMWkpxNlZaMVd0ZklJSjBUaWdPSmViRE10YlJiTUc2MTlEK3cKbDI2eUNmN3ZxUkdKNGlTblZNSkdWbmRjSWw3VVVnZGEybUw0bTdTZGtaMjdUVDRtQU83TUJTVWZHOENqWGJHYwpkVG9oQTNNSExYMkQ2UUFiVW1FR1ZybGgvemhTUGFkbmVOdndzc3UweGUyZVZ2dWVOc09NNXEwdklXZDloRjJFCkpmbm8rc2U5R21lTmExcEdQNldHTFlYVERuTm1SdEJrK1lFWUVTbktOOGZjM2hMRzRXZ29QRUlsY2JTeDIvRGEKQ3RuSU5QdEQ0VWFFRDhqc2pPbWU2RDQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRRFNLZGlRak5LaUEzRW8KTGtpL1NHY0lmUHVOWTc0eFFBUVpxNllIZWVUWFM5eHk1dEhrUHk4SVlPYVpNNENhN0xiYjZ2OXlZbWhMSUlNSgpPaUNlUmZhR0phR3FrTzhJejJFdmEvRnJISkNMeEtidXh0S2V6SzJSa3hPZGlyazhrUWhxWmwyM0xxeGxDaWJlCnhKeVJ1SlJWa0tmKzRKcWRMaGRmL1U4Wm1CVlZhRldTbjRFUklWMHFYT28yblB1MzcwMmZDN0lrTlJSdXhYZ1QKakRxWDlTZHoyNmFld3Awb1ZJR205aGVvVDg5bS8rdEIwSjNPcTI2ZllJMTl2czJWQzhPd1RwODJWajNsUmZEMAp4WHkrdG5uVVdBRGpROGIvMVdlRGxuSHI4TzM2c3Mya0tldVJ5L1h2Mm9wRHVTTklXL2VFYldsb1BJdENVVmEyCk9odCt6Rk94QWdNQkFBRUNnZ0VBUHdSREpwekRMOGMrYitEbytVbzVjc2NmR25jMCtVbUxzVExSMXQ0SzZ5K1oKQzI4QXNxTHJkR1N4NEhBYitOaFB3RU9Ia3dIRTZmbjJzSmFZWHp6MVBhWWRBcXJ3c2NDVkVJWWFYcGF6Rk9YRApkRWR6c2lBSFQyWTlkSGk3TUZrQW4vN1B6UFNXeHJrempJcUJ0QVFYbmt5QXd5RVAyMStOckwra3J6VDErS1NFCklPMHB2YlE5STlZNE1Vb1VleER1OXdDYytGQyt1T2hXcm5FUkxzT0NGOHdwaEFDV3lzZXVWdjZnODQ4V3lEdzMKemZsbGtRT1NwN1hiSnlTWS96K2lncHFHdTZkVDBqaURSQ3F5Zy9qY09SY0xnZ3dYa1I0cnJMcmVCUGZxZUpyUgpNQ3Fzakx2OURUUHZienJqQUU4b0lNcU4zaGtxWWplOFhWNkdya2ZHM1FLQmdRRHAxV1U2WmVmTHI4Z2pLekdJCmFzaFYxeDBZaDdUTVNiWk1hUHdFcVpraU1MOVFEd1laenczM2tJV2xkaFZ3WFFBTXpTaSsvL0JkUDF6eEpUY2gKdVN2TEZoUnhZSm5WL3FwTDNnVWVYQTc2b0xrUVpPRjBnUktBbWJsL1ArcWZyRDdHZFk0NU9mR2VsKzJWTXplNwo1bVZmL3lXL2xuVEJhOGVNa045MnFvNG5Vd0tCZ1FEbUZnZjRCa3lYRjdaTDVBSXQ5OUZkYThnL2VlZDcydERUCnYya0syaGZNWGlwRjltZEQwcHNjZXQ0SVhCanBvZS9zU2NlNloySVZINHhZNnBoNWlVeXBScVM1cEU4N0RibUYKOGRoeWhGTTFJUUJXUXhBVjlGWWREbS9PNmdKdVdNNWpaeGl5a29WZDRYU002S25xY3JPSTF1bk9VRU1tbzhUcAp2N1FKWnc0TWF3S0JnQ0FxU1lWeDlTT3dwM0FuQmVaRkFnL0V5bXpRWmc5ZjZHSzBZazVsNGZteENQQURVUXlGCnpkOExFMGRDYWdxTjBHN3lYYk9BVTFrUVdVR1dvL0hRbmZTT3Nmc3lsWmE1TkVYQllhVGVkdlVFM05BamdGdmQKVVdVOVFDWC83YzlQQzBlVGJoL3pGNGlBVDU4aGIzNDZZQ0dIWUhMdFNGdys3akVvMElSclM2aWZBb0dCQU40KwpNNDVRVDFTMmM4QlVTZ0txMkJGYjFiM3llelU0US9QMGRIc2w5RXpVUEJMK0Vmc0NDQTkzWXRaQ1YxSDh1R25OClRsM3dGRjZBN2FqSldXUXp5ZGZNUTdxSlNucXBKQ1dNV0YwdEVjNUV4VFdOYTVFNVJLQ21YRHRKNy9VMFZJN1IKZTVxcFNxZEc2YlJkM0JwNGxwQTd2dlVvcytRejFqVk9sWkZyZUxkbkFvR0FadEYrSDJMNk1pR01NU0gwUHg3Rgo0cTlRcXFzcEN0b2RYaHFMbXQyWm12Nk81UVgrYTkyajE2anJ1VGsvcmRmYXc2dWo0RThrSGt3a2hQRE94RS85CjBOeDVvVVowQWUvb2tXNDlZRWZBZkdLZzNPaCtuMEFuUTlXVTlvYnA3dHJOME04NE9qbVo2Y3dYQjhzb1VrckQKSW9HeWFoRFBhdm5vQ0p0L3lSNFRUdjA9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
type: kubernetes.io/tls
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ingress-tls-test
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  # tls:
  # - secretName: ingress-tls-test-secret
  rules:
  - http:
      paths:
      - path: /ingress-tls-test
        pathType: Prefix
        backend:
          service:
            name: ingress-tls-test-nginx
            port:
              number: 30080
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ingress-tls-test-nginx
spec:
  selector:
    matchLabels:
      run: ingress-tls-test-nginx
  replicas: 2
  template:
    metadata:
      labels:
        run: ingress-tls-test-nginx
    spec:
      containers:
      - name: ingress-tls-test-nginx
        image: nginx
        ports:
        - containerPort: 80
        - containerPort: 443
---
apiVersion: v1
kind: Service
metadata:
  name: ingress-tls-test-nginx
  labels:
    run: ingress-tls-test-nginx
spec:
  type: NodePort
  ports:
  - port: 30080
    targetPort: 80
    protocol: TCP
    name: http
  - port: 30081
    targetPort: 443
    protocol: TCP
    name: https
  selector:
    run: ingress-tls-test-nginx

